# 🚀 快速开始 - 线上服务器测试

## 📋 准备工作

### 1. 上传文件到服务器

通过FTP上传以下文件到服务器根目录：

```
✅ test_web.php                 # Web测试页面（必需）
✅ backend/database/*.sql       # SQL文件（必需）
✅ Postman集合.json             # Postman配置（可选）
```

### 2. 修改数据库配置

编辑 `application/database.php`：

```php
'hostname' => 'localhost',      // 数据库主机
'database' => '你的数据库名',
'username' => '你的数据库用户名',
'password' => '你的数据库密码',
```

---

## 🎯 三步开始测试

### 第一步：初始化数据库

**使用phpMyAdmin：**

1. 登录phpMyAdmin
2. 选择数据库
3. 点击"导入"
4. 按顺序导入6个SQL文件：
   - `01_promo_tables.sql`
   - `02_merchant_tables.sql`
   - `03_task_tables.sql`
   - `04_wallet_tables.sql`
   - `05_config_tables.sql`
   - `06_init_data.sql`

---

### 第二步：访问测试页面

在浏览器中打开：

```
http://你的域名/test_web.php
```

你会看到一个漂亮的测试界面，包含：

- ✅ 检查数据库按钮
- ✅ 创建测试用户按钮
- ✅ 查看测试用户按钮

---

### 第三步：执行测试

#### 1. 检查数据库

点击"检查数据库"按钮，确认：
- ✅ 16张数据表全部存在
- ✅ 初始化数据完整（6个等级、4个分红档位等）

#### 2. 创建测试用户

点击"创建测试用户"按钮，系统会自动创建：
- ✅ 用户A（testuser_a / 13800000001）
- ✅ 用户B（testuser_b / 13800000002）
- ✅ 用户C（testuser_c / 13800000003）
- ✅ 推广关系：A → B → C
- ✅ 每个用户余额10000元，保证金5000元

#### 3. 获取Token

创建用户后，页面会显示每个用户的Token，复制用户A的Token备用。

---

## 📱 使用Postman测试API

### 1. 导入Postman集合

1. 打开Postman
2. 点击 `Import`
3. 选择 `Postman集合.json`
4. 导入成功

### 2. 配置环境变量

创建新环境，添加变量：

| 变量名 | 值 | 说明 |
|--------|-----|------|
| base_url | http://你的域名 | 你的服务器地址 |
| token | 从test_web.php获取 | 用户A的Token |

### 3. 测试接口

按顺序测试：

1. **认证模块**
   - POST /api/user/login

2. **钱包模块**
   - GET /api/wallet/info
   - GET /api/wallet/logs

3. **商户模块**
   - GET /api/merchant/info
   - GET /api/merchant/auditStatus

4. **任务模块**
   - GET /api/task/list
   - GET /api/task/myTasks
   - GET /api/task/canReceive

5. **推广模块**
   - GET /api/promo/overview
   - GET /api/promo/levels
   - GET /api/promo/myInviteCode
   - GET /api/promo/myTeam

---

## 🎨 前端联调

### 1. 修改前端API地址

编辑 `backend/cool-unix/.env`：

```
VITE_APP_API_URL=http://你的域名/api
```

### 2. 在HBuilderX中运行

1. 打开HBuilderX
2. 打开 `backend/cool-unix` 文件夹
3. 点击 `运行` → `运行到浏览器` → `Chrome`

### 3. 登录测试

使用测试账号登录：
- 账号：`testuser_a` 或 `13800000001`
- 密码：`123456`

### 4. 测试功能

按照 `前后端联调指南.md` 测试各个页面。

---

## ✅ 测试账号

| 用户 | 账号 | 密码 | 手机号 | 余额 | 保证金 |
|------|------|------|--------|------|--------|
| 用户A | testuser_a | 123456 | 13800000001 | 10000 | 5000 |
| 用户B | testuser_b | 123456 | 13800000002 | 10000 | 5000 |
| 用户C | testuser_c | 123456 | 13800000003 | 10000 | 5000 |

**推广关系：** A → B → C

---

## 🐛 常见问题

### 1. 无法访问test_web.php

**解决方案：**
- 确认文件已上传
- 检查文件权限（644或755）
- 确认URL正确

### 2. 数据库连接失败

**解决方案：**
- 检查 `application/database.php` 配置
- 确认数据库用户名密码正确
- 确认数据库已创建

### 3. SQL导入失败

**解决方案：**
- 检查SQL文件编码（UTF-8）
- 一次导入一个文件
- 查看错误信息

### 4. 接口返回404

**解决方案：**
- 检查URL是否正确
- 确认路由配置
- 检查 `.htaccess` 文件

---

## 📞 需要帮助？

查看详细文档：
- 📖 `线上服务器测试指南.md` - 完整的测试步骤
- 📖 `接口测试指南.md` - 35个接口详细说明
- 📖 `前后端联调指南.md` - 前后端联调步骤

---

## 🎉 开始测试

现在访问：**http://你的域名/test_web.php**

开始你的测试之旅！

---

**预计时间：**
- 数据库初始化：30分钟
- 创建测试用户：5分钟
- API接口测试：2小时
- 前端联调：2-3天
- **总计：3-4天**
