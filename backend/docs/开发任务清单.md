# 商户互助平台 - 开发任务清单

> 版本: v1.0  
> 更新时间: 2025-01-22  
> 状态说明: ⬜待开始 🔄进行中 ✅已完成 ❌已取消

---

## 阶段一：数据库设计与导入

### 1.1 数据表创建
| 序号 | 任务 | 状态 | 备注 |
|------|------|------|------|
| 1.1.1 | 创建 `fa_promo_level` 等级配置表 | ✅ | |
| 1.1.2 | 创建 `fa_promo_relation` 推广关系表 | ✅ | |
| 1.1.3 | 创建 `fa_promo_commission` 佣金记录表 | ✅ | |
| 1.1.4 | 创建 `fa_promo_bonus_config` 分红配置表 | ✅ | |
| 1.1.5 | 创建 `fa_promo_bonus` 分红记录表 | ✅ | |
| 1.1.6 | 创建 `fa_promo_performance` 业绩统计表 | ✅ | |
| 1.1.7 | 创建 `fa_merchant` 商户信息表 | ✅ | |
| 1.1.8 | 创建 `fa_merchant_audit` 商户审核记录表 | ✅ | |
| 1.1.9 | 创建 `fa_mutual_task` 互助主任务表 | ✅ | |
| 1.1.10 | 创建 `fa_sub_task` 子任务表 | ✅ | |
| 1.1.11 | 创建 `fa_wallet` 钱包表 | ✅ | |
| 1.1.12 | 创建 `fa_wallet_log` 钱包流水表 | ✅ | |
| 1.1.13 | 创建 `fa_reward_rule` 奖励规则配置表 | ✅ | |
| 1.1.14 | 创建 `fa_profit_rule` 分润规则配置表 | ✅ | |
| 1.1.15 | 创建 `fa_withdraw` 提现申请表 | ✅ | |

### 1.2 初始数据
| 序号 | 任务 | 状态 | 备注 |
|------|------|------|------|
| 1.2.1 | 插入默认等级数据 | ✅ | |
| 1.2.2 | 插入默认奖励规则 | ✅ | |
| 1.2.3 | 插入默认分润规则 | ✅ | |
| 1.2.4 | 插入默认分红配置 | ✅ | |
| 1.2.5 | 插入系统配置参数 | ✅ | |

---

## 阶段二：后端 Model 层开发

### 2.1 推广模块 Model
| 序号 | 任务 | 文件路径 | 状态 |
|------|------|----------|------|
| 2.1.1 | Level 等级模型 | `application/common/model/promo/Level.php` | ✅ |
| 2.1.2 | Relation 关系模型 | `application/common/model/promo/Relation.php` | ✅ |
| 2.1.3 | Commission 佣金模型 | `application/common/model/promo/Commission.php` | ✅ |
| 2.1.4 | BonusConfig 分红配置模型 | `application/common/model/promo/BonusConfig.php` | ✅ |
| 2.1.5 | Bonus 分红记录模型 | `application/common/model/promo/Bonus.php` | ✅ |
| 2.1.6 | Performance 业绩模型 | `application/common/model/promo/Performance.php` | ✅ |

### 2.2 商户模块 Model
| 序号 | 任务 | 文件路径 | 状态 |
|------|------|----------|------|
| 2.2.1 | Merchant 商户模型 | `application/common/model/merchant/Merchant.php` | ✅ |
| 2.2.2 | MerchantAudit 审核模型 | `application/common/model/merchant/MerchantAudit.php` | ✅ |

### 2.3 任务模块 Model
| 序号 | 任务 | 文件路径 | 状态 |
|------|------|----------|------|
| 2.3.1 | MutualTask 主任务模型 | `application/common/model/task/MutualTask.php` | ✅ |
| 2.3.2 | SubTask 子任务模型 | `application/common/model/task/SubTask.php` | ✅ |

### 2.4 钱包模块 Model
| 序号 | 任务 | 文件路径 | 状态 |
|------|------|----------|------|
| 2.4.1 | Wallet 钱包模型 | `application/common/model/wallet/Wallet.php` | ✅ |
| 2.4.2 | WalletLog 流水模型 | `application/common/model/wallet/WalletLog.php` | ✅ |
| 2.4.3 | Withdraw 提现模型 | `application/common/model/wallet/Withdraw.php` | ✅ |

### 2.5 配置模块 Model
| 序号 | 任务 | 文件路径 | 状态 |
|------|------|----------|------|
| 2.5.1 | RewardRule 奖励规则模型 | `application/common/model/config/RewardRule.php` | ✅ |
| 2.5.2 | ProfitRule 分润规则模型 | `application/common/model/config/ProfitRule.php` | ✅ |

---

## 阶段三：后端 Service 层开发

### 3.1 服务类开发
| 序号 | 任务 | 文件路径 | 状态 |
|------|------|----------|------|
| 3.1.1 | WalletService 钱包服务 | `application/common/library/WalletService.php` | ✅ |
| 3.1.2 | PromoService 推广服务 | `application/common/library/PromoService.php` | ✅ |
| 3.1.3 | TaskService 任务服务 | `application/common/library/TaskService.php` | ✅ |
| 3.1.4 | RewardService 奖励服务 | `application/common/library/RewardService.php` | ✅ |
| 3.1.5 | SettlementService 结算服务 | `application/common/library/SettlementService.php` | ✅ |
| 3.1.6 | MerchantService 商户服务 | `application/common/library/MerchantService.php` | ✅ |

### 3.2 服务方法清单

#### WalletService 钱包服务
| 方法 | 说明 | 状态 |
|------|------|------|
| getWallet($userId) | 获取用户钱包(不存在则创建) | ⬜ |
| changeBalance($userId, $amount, $bizType, $bizId, $remark) | 变更可用余额 | ⬜ |
| changeDeposit($userId, $amount, $bizType, $bizId, $remark) | 变更保证金 | ⬜ |
| freezeDeposit($userId, $amount, $bizType, $bizId, $remark) | 冻结保证金 | ⬜ |
| unfreezeDeposit($userId, $amount, $bizType, $bizId, $remark) | 解冻保证金 | ⬜ |
| changeMutualBalance($userId, $amount, $bizType, $bizId, $remark) | 变更互助余额 | ⬜ |
| createWithdraw($userId, $amount, $bankInfo) | 创建提现申请 | ⬜ |

#### PromoService 推广服务
| 方法 | 说明 | 状态 |
|------|------|------|
| getRelation($userId) | 获取用户推广关系 | ⬜ |
| createRelation($userId, $parentId) | 创建推广关系 | ⬜ |
| bindParent($userId, $inviteCode) | 绑定上级 | ⬜ |
| generateInviteCode($userId) | 生成邀请码 | ⬜ |
| getParentChain($userId, $depth) | 获取上级链 | ⬜ |
| getDirectChildren($userId) | 获取直推下级 | ⬜ |
| getTeamMembers($userId, $page, $limit) | 获取团队成员 | ⬜ |
| getUserLevel($userId) | 获取用户等级 | ⬜ |
| upgradeLevel($userId, $levelId, $payMethod) | 升级等级 | ⬜ |
| checkAutoUpgrade($userId) | 检查自动升级 | ⬜ |

#### TaskService 任务服务
| 方法 | 说明 | 状态 |
|------|------|------|
| createTask($userId, $data) | 创建互助任务 | ⬜ |
| approveTask($taskId) | 审核通过任务 | ⬜ |
| rejectTask($taskId, $reason) | 审核拒绝任务 | ⬜ |
| splitTask($taskId) | 拆分子任务 | ⬜ |
| dispatchSubTasks($taskId) | 派发子任务 | ⬜ |
| assignSubTask($subTaskId, $toUserId) | 分配子任务 | ⬜ |
| acceptSubTask($subTaskId, $userId) | 接受子任务 | ⬜ |
| uploadProof($subTaskId, $proofImage, $thirdOrderNo) | 上传支付凭证 | ⬜ |
| verifySubTask($subTaskId) | 校验子任务 | ⬜ |
| completeSubTask($subTaskId) | 完成子任务 | ⬜ |
| failSubTask($subTaskId, $reason) | 子任务失败 | ⬜ |
| cancelSubTask($subTaskId) | 取消子任务 | ⬜ |
| checkTaskCompletion($taskId) | 检查主任务完成状态 | ⬜ |
| getAvailableSubTasks($userId) | 获取可接子任务 | ⬜ |

#### RewardService 奖励服务
| 方法 | 说明 | 状态 |
|------|------|------|
| triggerReward($scene, $userId, $baseAmount, $bizId) | 触发奖励计算 | ⬜ |
| calculateDirectReward($userId, $scene, $baseAmount) | 计算直推奖 | ⬜ |
| calculateIndirectReward($userId, $scene, $baseAmount) | 计算间推奖 | ⬜ |
| calculateLevelDiffProfit($userId, $scene, $baseAmount) | 计算等级差分润 | ⬜ |
| calculatePeerReward($userId, $scene, $baseAmount) | 计算平级奖 | ⬜ |
| settleCommission($commissionId) | 结算佣金 | ⬜ |

#### SettlementService 结算服务
| 方法 | 说明 | 状态 |
|------|------|------|
| settleSubTask($subTaskId) | 结算子任务 | ⬜ |
| calculateMonthlyBonus($month) | 计算月度分红 | ⬜ |
| settleBonus($bonusId) | 发放分红 | ⬜ |
| snapshotPerformance($userId, $month) | 业绩快照 | ⬜ |
| calculateGrowth($userId, $month) | 计算业绩增量 | ⬜ |

#### MerchantService 商户服务
| 方法 | 说明 | 状态 |
|------|------|------|
| register($userId, $data) | 商户注册 | ⬜ |
| getMerchant($userId) | 获取商户信息 | ⬜ |
| approve($merchantId) | 审核通过 | ⬜ |
| reject($merchantId, $reason) | 审核拒绝 | ⬜ |
| payEntryFee($userId, $payMethod) | 支付入驻费 | ⬜ |

---

## 阶段四：API 接口开发

### 4.1 商户模块 API
| 序号 | 接口 | 方法 | Controller | 状态 |
|------|------|------|------------|------|
| 4.1.1 | /api/merchant/info | GET | Merchant::info | ⬜ |
| 4.1.2 | /api/merchant/register | POST | Merchant::register | ⬜ |
| 4.1.3 | /api/merchant/auditStatus | GET | Merchant::auditStatus | ⬜ |
| 4.1.4 | /api/merchant/payEntryFee | POST | Merchant::payEntryFee | ⬜ |

### 4.2 任务模块 API
| 序号 | 接口 | 方法 | Controller | 状态 |
|------|------|------|------------|------|
| 4.2.1 | /api/task/list | GET | Task::list | ⬜ |
| 4.2.2 | /api/task/detail | GET | Task::detail | ⬜ |
| 4.2.3 | /api/task/create | POST | Task::create | ⬜ |
| 4.2.4 | /api/task/cancel | POST | Task::cancel | ⬜ |
| 4.2.5 | /api/task/myTasks | GET | Task::myTasks | ⬜ |
| 4.2.6 | /api/task/subtask/available | GET | Task::subtaskAvailable | ⬜ |
| 4.2.7 | /api/task/subtask/my | GET | Task::subtaskMy | ⬜ |
| 4.2.8 | /api/task/subtask/detail | GET | Task::subtaskDetail | ⬜ |
| 4.2.9 | /api/task/subtask/accept | POST | Task::subtaskAccept | ⬜ |
| 4.2.10 | /api/task/subtask/uploadProof | POST | Task::subtaskUploadProof | ⬜ |
| 4.2.11 | /api/task/subtask/cancel | POST | Task::subtaskCancel | ⬜ |

### 4.3 钱包模块 API
| 序号 | 接口 | 方法 | Controller | 状态 |
|------|------|------|------------|------|
| 4.3.1 | /api/wallet/info | GET | Wallet::info | ⬜ |
| 4.3.2 | /api/wallet/logs | GET | Wallet::logs | ⬜ |
| 4.3.3 | /api/wallet/recharge | POST | Wallet::recharge | ⬜ |
| 4.3.4 | /api/wallet/withdraw | POST | Wallet::withdraw | ⬜ |
| 4.3.5 | /api/wallet/withdrawRecords | GET | Wallet::withdrawRecords | ⬜ |
| 4.3.6 | /api/wallet/deposit/pay | POST | Wallet::depositPay | ⬜ |
| 4.3.7 | /api/wallet/deposit/withdraw | POST | Wallet::depositWithdraw | ⬜ |

### 4.4 推广模块 API
| 序号 | 接口 | 方法 | Controller | 状态 |
|------|------|------|------------|------|
| 4.4.1 | /api/promo/overview | GET | Promo::overview | ⬜ |
| 4.4.2 | /api/promo/levels | GET | Promo::levels | ⬜ |
| 4.4.3 | /api/promo/purchaseLevel | POST | Promo::purchaseLevel | ⬜ |
| 4.4.4 | /api/promo/myInviteCode | GET | Promo::myInviteCode | ⬜ |
| 4.4.5 | /api/promo/bindRelation | POST | Promo::bindRelation | ⬜ |
| 4.4.6 | /api/promo/myTeam | GET | Promo::myTeam | ⬜ |
| 4.4.7 | /api/promo/commissionList | GET | Promo::commissionList | ⬜ |
| 4.4.8 | /api/promo/walletLogs | GET | Promo::walletLogs | ⬜ |
| 4.4.9 | /api/promo/performanceSummary | GET | Promo::performanceSummary | ⬜ |
| 4.4.10 | /api/promo/bonusSummary | GET | Promo::bonusSummary | ⬜ |
| 4.4.11 | /api/promo/bonusRecords | GET | Promo::bonusRecords | ⬜ |

---

## 阶段五：API 接口测试

### 5.1 测试用例
| 序号 | 测试场景 | 状态 |
|------|----------|------|
| 5.1.1 | 用户注册并绑定邀请码 | ⬜ |
| 5.1.2 | 商户注册进件 | ⬜ |
| 5.1.3 | 商户审核通过触发奖励 | ⬜ |
| 5.1.4 | 充值保证金 | ⬜ |
| 5.1.5 | 发起互助任务 | ⬜ |
| 5.1.6 | 任务拆分子任务 | ⬜ |
| 5.1.7 | 子任务派发(检查保证金扣除) | ⬜ |
| 5.1.8 | 接受子任务 | ⬜ |
| 5.1.9 | 上传支付凭证 | ⬜ |
| 5.1.10 | 子任务完成(检查余额和佣金发放) | ⬜ |
| 5.1.11 | 主任务完成(检查保证金释放) | ⬜ |
| 5.1.12 | 等级购买触发奖励 | ⬜ |
| 5.1.13 | 分润计算测试 | ⬜ |
| 5.1.14 | 提现申请 | ⬜ |
| 5.1.15 | 月度分红计算 | ⬜ |

### 5.2 边界测试
| 序号 | 测试场景 | 状态 |
|------|----------|------|
| 5.2.1 | 保证金不足时暂停派发 | ⬜ |
| 5.2.2 | 互助余额不足时不分配任务 | ⬜ |
| 5.2.3 | 并发接单测试 | ⬜ |
| 5.2.4 | 子任务超时处理 | ⬜ |
| 5.2.5 | 余额不足提现 | ⬜ |

---

## 阶段六：后台管理开发

### 6.1 后台控制器
| 序号 | 任务 | 文件路径 | 状态 |
|------|------|----------|------|
| 6.1.1 | 商户列表 | `application/admin/controller/merchant/Merchant.php` | ⬜ |
| 6.1.2 | 商户审核 | `application/admin/controller/merchant/Audit.php` | ⬜ |
| 6.1.3 | 等级配置 | `application/admin/controller/promo/Level.php` | ⬜ |
| 6.1.4 | 推广关系 | `application/admin/controller/promo/Relation.php` | ⬜ |
| 6.1.5 | 佣金记录 | `application/admin/controller/promo/Commission.php` | ⬜ |
| 6.1.6 | 分红管理 | `application/admin/controller/promo/Bonus.php` | ⬜ |
| 6.1.7 | 主任务列表 | `application/admin/controller/task/Mutualtask.php` | ⬜ |
| 6.1.8 | 子任务列表 | `application/admin/controller/task/Subtask.php` | ⬜ |
| 6.1.9 | 用户钱包 | `application/admin/controller/wallet/Wallet.php` | ⬜ |
| 6.1.10 | 钱包流水 | `application/admin/controller/wallet/Log.php` | ⬜ |
| 6.1.11 | 提现审核 | `application/admin/controller/wallet/Withdraw.php` | ⬜ |
| 6.1.12 | 奖励规则 | `application/admin/controller/config/Reward.php` | ⬜ |
| 6.1.13 | 分润规则 | `application/admin/controller/config/Profit.php` | ⬜ |
| 6.1.14 | 分红配置 | `application/admin/controller/config/Bonusconfig.php` | ⬜ |

### 6.2 后台模型
| 序号 | 任务 | 文件路径 | 状态 |
|------|------|----------|------|
| 6.2.1 | 商户模型 | `application/admin/model/merchant/Merchant.php` | ⬜ |
| 6.2.2 | 等级模型 | `application/admin/model/promo/Level.php` | ⬜ |
| 6.2.3 | 关系模型 | `application/admin/model/promo/Relation.php` | ⬜ |
| 6.2.4 | 佣金模型 | `application/admin/model/promo/Commission.php` | ⬜ |
| 6.2.5 | 分红模型 | `application/admin/model/promo/Bonus.php` | ⬜ |
| 6.2.6 | 主任务模型 | `application/admin/model/task/Mutualtask.php` | ⬜ |
| 6.2.7 | 子任务模型 | `application/admin/model/task/Subtask.php` | ⬜ |
| 6.2.8 | 钱包模型 | `application/admin/model/wallet/Wallet.php` | ⬜ |
| 6.2.9 | 流水模型 | `application/admin/model/wallet/Log.php` | ⬜ |
| 6.2.10 | 提现模型 | `application/admin/model/wallet/Withdraw.php` | ⬜ |
| 6.2.11 | 奖励规则模型 | `application/admin/model/config/Reward.php` | ⬜ |
| 6.2.12 | 分润规则模型 | `application/admin/model/config/Profit.php` | ⬜ |
| 6.2.13 | 分红配置模型 | `application/admin/model/config/Bonusconfig.php` | ⬜ |

### 6.3 后台视图
| 序号 | 任务 | 文件路径 | 状态 |
|------|------|----------|------|
| 6.3.1 | 商户列表视图 | `application/admin/view/merchant/merchant/index.html` | ⬜ |
| 6.3.2 | 商户审核视图 | `application/admin/view/merchant/audit/index.html` | ⬜ |
| 6.3.3 | 等级配置视图 | `application/admin/view/promo/level/index.html` | ⬜ |
| 6.3.4 | 推广关系视图 | `application/admin/view/promo/relation/index.html` | ⬜ |
| 6.3.5 | 佣金记录视图 | `application/admin/view/promo/commission/index.html` | ⬜ |
| 6.3.6 | 分红管理视图 | `application/admin/view/promo/bonus/index.html` | ⬜ |
| 6.3.7 | 主任务视图 | `application/admin/view/task/mutualtask/index.html` | ⬜ |
| 6.3.8 | 子任务视图 | `application/admin/view/task/subtask/index.html` | ⬜ |
| 6.3.9 | 用户钱包视图 | `application/admin/view/wallet/wallet/index.html` | ⬜ |
| 6.3.10 | 钱包流水视图 | `application/admin/view/wallet/log/index.html` | ⬜ |
| 6.3.11 | 提现审核视图 | `application/admin/view/wallet/withdraw/index.html` | ⬜ |
| 6.3.12 | 奖励规则视图 | `application/admin/view/config/reward/index.html` | ⬜ |
| 6.3.13 | 分润规则视图 | `application/admin/view/config/profit/index.html` | ⬜ |
| 6.3.14 | 分红配置视图 | `application/admin/view/config/bonusconfig/index.html` | ⬜ |

### 6.4 后台 JS
| 序号 | 任务 | 文件路径 | 状态 |
|------|------|----------|------|
| 6.4.1 | 商户列表JS | `public/assets/js/backend/merchant/merchant.js` | ⬜ |
| 6.4.2 | 商户审核JS | `public/assets/js/backend/merchant/audit.js` | ⬜ |
| 6.4.3 | 等级配置JS | `public/assets/js/backend/promo/level.js` | ⬜ |
| 6.4.4 | 推广关系JS | `public/assets/js/backend/promo/relation.js` | ⬜ |
| 6.4.5 | 佣金记录JS | `public/assets/js/backend/promo/commission.js` | ⬜ |
| 6.4.6 | 分红管理JS | `public/assets/js/backend/promo/bonus.js` | ⬜ |
| 6.4.7 | 主任务JS | `public/assets/js/backend/task/mutualtask.js` | ⬜ |
| 6.4.8 | 子任务JS | `public/assets/js/backend/task/subtask.js` | ⬜ |
| 6.4.9 | 用户钱包JS | `public/assets/js/backend/wallet/wallet.js` | ⬜ |
| 6.4.10 | 钱包流水JS | `public/assets/js/backend/wallet/log.js` | ⬜ |
| 6.4.11 | 提现审核JS | `public/assets/js/backend/wallet/withdraw.js` | ⬜ |
| 6.4.12 | 奖励规则JS | `public/assets/js/backend/config/reward.js` | ⬜ |
| 6.4.13 | 分润规则JS | `public/assets/js/backend/config/profit.js` | ⬜ |
| 6.4.14 | 分红配置JS | `public/assets/js/backend/config/bonusconfig.js` | ⬜ |

### 6.5 后台菜单配置
| 序号 | 任务 | 状态 |
|------|------|------|
| 6.5.1 | 添加商户管理菜单 | ⬜ |
| 6.5.2 | 添加任务管理菜单 | ⬜ |
| 6.5.3 | 添加钱包管理菜单 | ⬜ |
| 6.5.4 | 添加推广管理菜单 | ⬜ |
| 6.5.5 | 添加配置中心菜单 | ⬜ |
| 6.5.6 | 配置菜单权限 | ⬜ |

---

## 阶段七：后台功能检查与完善

### 7.1 功能检查清单
| 序号 | 检查项 | 状态 |
|------|--------|------|
| 7.1.1 | 商户列表CRUD功能完整 | ⬜ |
| 7.1.2 | 商户审核通过/拒绝正常 | ⬜ |
| 7.1.3 | 等级配置增删改正常 | ⬜ |
| 7.1.4 | 推广关系查询正常 | ⬜ |
| 7.1.5 | 佣金记录查询/筛选正常 | ⬜ |
| 7.1.6 | 主任务审核/管理正常 | ⬜ |
| 7.1.7 | 子任务状态管理正常 | ⬜ |
| 7.1.8 | 钱包查询/操作正常 | ⬜ |
| 7.1.9 | 提现审核功能正常 | ⬜ |
| 7.1.10 | 奖励规则配置正常 | ⬜ |
| 7.1.11 | 分润规则配置正常 | ⬜ |
| 7.1.12 | 分红配置正常 | ⬜ |
| 7.1.13 | 数据导出功能正常 | ⬜ |
| 7.1.14 | 搜索筛选功能正常 | ⬜ |

### 7.2 补充功能
| 序号 | 任务 | 状态 |
|------|------|------|
| 7.2.1 | 商户详情弹窗 | ⬜ |
| 7.2.2 | 任务详情弹窗 | ⬜ |
| 7.2.3 | 用户推广关系树图 | ⬜ |
| 7.2.4 | 数据统计面板 | ⬜ |
| 7.2.5 | 操作日志记录 | ⬜ |

---

## 阶段八：用户端 (Cool Unix) 开发

### 8.1 类型定义
| 序号 | 任务 | 文件路径 | 状态 |
|------|------|----------|------|
| 8.1.1 | 商户类型定义 | `cool-unix/types/merchant.ts` | ⬜ |
| 8.1.2 | 任务类型定义 | `cool-unix/types/task.ts` | ⬜ |
| 8.1.3 | 钱包类型定义 | `cool-unix/types/wallet.ts` | ⬜ |

### 8.2 API 服务层
| 序号 | 任务 | 文件路径 | 状态 |
|------|------|----------|------|
| 8.2.1 | 商户服务 | `cool-unix/services/merchant.ts` | ⬜ |
| 8.2.2 | 任务服务 | `cool-unix/services/task.ts` | ⬜ |
| 8.2.3 | 钱包服务 | `cool-unix/services/wallet.ts` | ⬜ |

### 8.3 商户模块页面
| 序号 | 任务 | 文件路径 | 状态 |
|------|------|----------|------|
| 8.3.1 | 商户中心 | `cool-unix/pages/merchant/index.uvue` | ⬜ |
| 8.3.2 | 商户注册 | `cool-unix/pages/merchant/register.uvue` | ⬜ |
| 8.3.3 | 审核状态 | `cool-unix/pages/merchant/audit-status.uvue` | ⬜ |
| 8.3.4 | 商户信息 | `cool-unix/pages/merchant/info.uvue` | ⬜ |

### 8.4 任务模块页面
| 序号 | 任务 | 文件路径 | 状态 |
|------|------|----------|------|
| 8.4.1 | 任务列表 | `cool-unix/pages/task/index.uvue` | ⬜ |
| 8.4.2 | 发起任务 | `cool-unix/pages/task/create.uvue` | ⬜ |
| 8.4.3 | 任务详情 | `cool-unix/pages/task/detail.uvue` | ⬜ |
| 8.4.4 | 我发起的任务 | `cool-unix/pages/task/my-tasks.uvue` | ⬜ |
| 8.4.5 | 可接子任务列表 | `cool-unix/pages/task/subtask/list.uvue` | ⬜ |
| 8.4.6 | 我接的子任务 | `cool-unix/pages/task/subtask/my.uvue` | ⬜ |
| 8.4.7 | 子任务详情 | `cool-unix/pages/task/subtask/detail.uvue` | ⬜ |
| 8.4.8 | 上传凭证 | `cool-unix/pages/task/subtask/upload.uvue` | ⬜ |
| 8.4.9 | 保证金管理 | `cool-unix/pages/task/deposit.uvue` | ⬜ |

### 8.5 钱包模块页面
| 序号 | 任务 | 文件路径 | 状态 |
|------|------|----------|------|
| 8.5.1 | 钱包首页 | `cool-unix/pages/wallet/index.uvue` | ⬜ |
| 8.5.2 | 充值页面 | `cool-unix/pages/wallet/recharge.uvue` | ⬜ |
| 8.5.3 | 提现页面 | `cool-unix/pages/wallet/withdraw.uvue` | ⬜ |
| 8.5.4 | 账单明细 | `cool-unix/pages/wallet/logs.uvue` | ⬜ |

### 8.6 推广模块页面(完善)
| 序号 | 任务 | 文件路径 | 状态 |
|------|------|----------|------|
| 8.6.1 | 检查并完善推广中心 | `cool-unix/pages/promo/index.uvue` | ⬜ |
| 8.6.2 | 检查并完善等级购买 | `cool-unix/pages/promo/level.uvue` | ⬜ |
| 8.6.3 | 检查并完善邀请分享 | `cool-unix/pages/promo/invite.uvue` | ⬜ |
| 8.6.4 | 检查并完善团队页面 | `cool-unix/pages/promo/team.uvue` | ⬜ |
| 8.6.5 | 检查并完善佣金记录 | `cool-unix/pages/promo/commission.uvue` | ⬜ |
| 8.6.6 | 检查并完善业绩统计 | `cool-unix/pages/promo/performance.uvue` | ⬜ |
| 8.6.7 | 检查并完善分红页面 | `cool-unix/pages/promo/bonus.uvue` | ⬜ |
| 8.6.8 | 检查并完善钱包页面 | `cool-unix/pages/promo/wallet.uvue` | ⬜ |

### 8.7 路由配置
| 序号 | 任务 | 状态 |
|------|------|------|
| 8.7.1 | 配置商户模块路由 | ⬜ |
| 8.7.2 | 配置任务模块路由 | ⬜ |
| 8.7.3 | 配置钱包模块路由 | ⬜ |

---

## 阶段九：定时任务与队列

### 9.1 命令行任务
| 序号 | 任务 | 文件路径 | 状态 |
|------|------|----------|------|
| 9.1.1 | 月度分红计算命令 | `application/command/BonusCalculate.php` | ⬜ |
| 9.1.2 | 子任务超时检查命令 | `application/command/TaskCheckTimeout.php` | ⬜ |
| 9.1.3 | 业绩快照命令 | `application/command/PerformanceSnapshot.php` | ⬜ |
| 9.1.4 | 自动升级检查命令 | `application/command/LevelAutoUpgrade.php` | ⬜ |

### 9.2 队列任务
| 序号 | 任务 | 文件路径 | 状态 |
|------|------|----------|------|
| 9.2.1 | 奖励计算队列 | `application/job/RewardCalculateJob.php` | ⬜ |
| 9.2.2 | 消息通知队列 | `application/job/NotifyJob.php` | ⬜ |

---

## 阶段十：测试与上线

### 10.1 集成测试
| 序号 | 测试项 | 状态 |
|------|--------|------|
| 10.1.1 | 完整商户入驻流程测试 | ⬜ |
| 10.1.2 | 完整互助任务流程测试 | ⬜ |
| 10.1.3 | 完整推广分佣流程测试 | ⬜ |
| 10.1.4 | 完整提现流程测试 | ⬜ |
| 10.1.5 | 月度分红流程测试 | ⬜ |

### 10.2 性能测试
| 序号 | 测试项 | 状态 |
|------|--------|------|
| 10.2.1 | 并发接单压力测试 | ⬜ |
| 10.2.2 | 大数据量查询性能 | ⬜ |
| 10.2.3 | 分红计算性能 | ⬜ |

### 10.3 安全测试
| 序号 | 测试项 | 状态 |
|------|--------|------|
| 10.3.1 | 接口权限测试 | ⬜ |
| 10.3.2 | 数据越权测试 | ⬜ |
| 10.3.3 | 资金安全测试 | ⬜ |

### 10.4 上线准备
| 序号 | 任务 | 状态 |
|------|------|------|
| 10.4.1 | 生产环境数据库迁移 | ⬜ |
| 10.4.2 | 配置定时任务 | ⬜ |
| 10.4.3 | 配置队列服务 | ⬜ |
| 10.4.4 | 部署上线 | ⬜ |

---

## 任务统计

| 阶段 | 任务数 | 完成数 | 进度 |
|------|--------|--------|------|
| 一、数据库设计 | 20 | 0 | 0% |
| 二、Model层 | 14 | 0 | 0% |
| 三、Service层 | 6+方法 | 0 | 0% |
| 四、API接口 | 26 | 0 | 0% |
| 五、API测试 | 20 | 0 | 0% |
| 六、后台开发 | 47 | 0 | 0% |
| 七、后台完善 | 19 | 0 | 0% |
| 八、用户端 | 24 | 0 | 0% |
| 九、定时任务 | 6 | 0 | 0% |
| 十、测试上线 | 14 | 0 | 0% |
| **总计** | **196+** | **0** | **0%** |

---

## 开发顺序说明

```
1. 数据库设计并导入MySQL
        ↓
2. API接口开发（Model → Service → Controller）
        ↓
3. 循环测试API确保无错误
        ↓
4. 后台视图/控制器/JS开发
        ↓
5. 检查后台功能完善程度，继续补齐
        ↓
6. 用户端(Cool Unix)开发
        ↓
7. 定时任务与队列开发
        ↓
8. 集成测试、性能测试、安全测试
        ↓
9. 部署上线
```

---

> 最后更新: 2025-01-22
