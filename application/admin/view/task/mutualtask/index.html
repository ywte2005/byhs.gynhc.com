<style>
.status-badge { padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 500; display: inline-block; }
.status-pending { background: #FFF3E0; color: #E65100; }
.status-approved { background: #E3F2FD; color: #1565C0; }
.status-running { background: #E8F5E9; color: #2E7D32; }
.status-paused { background: #FFF8E1; color: #F57F17; }
.status-completed { background: #F3E5F5; color: #7B1FA2; }
.status-cancelled { background: #ECEFF1; color: #546E7A; }
.status-rejected { background: #FFEBEE; color: #C62828; }
.progress-mini { height: 6px; margin: 5px 0 0 0; border-radius: 3px; }
.task-amount { font-weight: bold; }
.task-amount .completed { color: #4CAF50; }
.task-amount .total { color: #666; }
.tab-stat { display: inline-block; background: #f44336; color: #fff; padding: 2px 8px; border-radius: 10px; font-size: 11px; margin-left: 5px; }
</style>

<div class="panel panel-default panel-intro">
    <div class="panel-heading">
        <div class="panel-lead"><em>任务管理</em> - 管理互助刷单任务，审核与派发</div>
        <ul class="nav nav-tabs" data-field="status">
            <li class="active"><a href="#t-all" data-value="" data-toggle="tab">全部</a></li>
            <li><a href="#t-pending" data-value="pending" data-toggle="tab">待审核 <span class="tab-stat" id="pending-count">0</span></a></li>
            <li><a href="#t-running" data-value="running" data-toggle="tab">进行中</a></li>
            <li><a href="#t-completed" data-value="completed" data-toggle="tab">已完成</a></li>
            <li><a href="#t-cancelled" data-value="cancelled" data-toggle="tab">已取消</a></li>
        </ul>
    </div>
    <div class="panel-body">
        <div id="myTabContent" class="tab-content">
            <div class="tab-pane fade active in" id="one">
                <div class="widget-body no-padding">
                    <div id="toolbar" class="toolbar">
                        <a href="javascript:;" class="btn btn-primary btn-refresh" title="刷新"><i class="fa fa-refresh"></i></a>
                        <a href="javascript:;" class="btn btn-success btn-add {:$auth->check('task/mutualtask/add')?'':'hide'}" title="添加"><i class="fa fa-plus"></i> 添加</a>
                        <a href="javascript:;" class="btn btn-success btn-multi-approve {:$auth->check('task/mutualtask/approve')?'':'hide'}" title="批量审核通过"><i class="fa fa-check"></i> 批量通过</a>
                        <a href="javascript:;" class="btn btn-info btn-dispatch-all {:$auth->check('task/mutualtask/dispatchAll')?'':'hide'}" title="一键派发"><i class="fa fa-paper-plane"></i> 派发子任务</a>
                    </div>
                    <table id="table" class="table table-striped table-bordered table-hover table-nowrap"
                           data-operate-edit="{:$auth->check('task/mutualtask/edit')}"
                           data-operate-del="{:$auth->check('task/mutualtask/del')}"
                           width="100%">
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 任务详情弹窗 -->
<div class="modal fade" id="taskDetailModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title"><i class="fa fa-tasks"></i> 任务详情</h4>
            </div>
            <div class="modal-body" id="taskDetailContent"></div>
            <div class="modal-footer" id="taskDetailFooter">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
            </div>
        </div>
    </div>
</div>
